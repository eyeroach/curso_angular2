!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(r,i){for(var s,a,l=0,u=[];l<r.length;l++)a=r[l],o[a]&&u.push.apply(u,o[a]),o[a]=0;for(s in i){var c=i[s];switch(typeof c){case"object":e[s]=function(t){var n=t.slice(1),r=t[0];return function(t,o,i){e[r].apply(this,[t,o,i].concat(n))}}(c);break;case"function":e[s]=c;break;default:e[s]=e[c]}}for(n&&n(r,i);u.length;)u.shift().call(null,t)};var r={},o={15:0,1:0};return t.e=function(e,n){if(0===o[e])return n.call(null,t);if(void 0!==o[e])o[e].push(n);else{o[e]=[n];var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,i.src=t.p+"js/"+e+"."+{0:"b4e4a871354f3bef3647",1:"3a85f0551754e2f9b817"}[e]+".js",r.appendChild(i)}},t.m=e,t.c=r,t.p="https://static.platzi.com/static/",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,o){r.apply(this,[e,t,o].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}({0:function(e,exports,t){e.exports=t(522)},1:function(e,exports,t){e.exports=t(2)(520)},2:function(e,exports){e.exports=modules},3:function(e,exports,t){e.exports=t(2)(237)},4:function(e,exports,t){e.exports=t(2)(706)},6:function(e,exports,t){e.exports=t(2)(1343)},7:function(e,exports,t){e.exports=t(2)(1162)},8:function(e,exports,t){e.exports=t(2)(1165)},9:function(e,exports,t){e.exports=t(2)(891)},10:function(e,exports,t){e.exports=t(2)(1100)},11:function(e,exports){"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return e.split("; ").reduce(function(e,n){var o=n.split("=");return r({},e,t({},o[0],o[1]))},{})}Object.defineProperty(exports,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};exports["default"]=n},12:function(e,exports,t){var n;/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";var r=function(){function e(e,t){for(var n=t.length,r=0;n>r;++r)o(e,t[r])}function t(e,t){e[t]=!0}function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(t[n]?e[n]=!0:delete e[n])}function r(e,t){for(var n=t.split(s),r=n.length,o=0;r>o;++o)e[n[o]]=!0}function o(o,i){if(i){var s=typeof i;"string"===s?r(o,i):Array.isArray(i)?e(o,i):"object"===s?n(o,i):"number"===s&&t(o,i)}}function i(){var t={};e(t,arguments);var n="";for(var r in t)n+=" "+r;return n.substr(1)}var s=/\s+/;return i}();"undefined"!=typeof e&&e.exports?e.exports=r:(n=function(){return r}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n)))}()},13:function(e,exports,t){e.exports=t(2)(697)},14:function(e,exports,t){e.exports=t(2)(241)},17:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return(0,i.createClass)({displayName:"IntlConnected("+(0,u["default"])(e)+")",mixins:[a.IntlMixin],getMessage:function(e){try{return this.getIntlMessage(e)}catch(t){return t.message}},render:function(){return s["default"].createElement(e,o({getIntlMessage:this.getMessage},this.context,this.props))}})}Object.defineProperty(exports,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};exports["default"]=r;var i=t(1),s=n(i),a=t(4),l=t(31),u=n(l)},18:function(e,exports,t){e.exports=t(2)(550)},19:function(e,exports,t){e.exports=t(2)(266)},22:function(e,exports,t){e.exports=t(2)(898)},30:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t,n,s={user:u.PropTypes.object};return n=t=function(t){function n(){return r(this,n),o(this,Object.getPrototypeOf(n).apply(this,arguments))}return i(n,t),l(n,[{key:"getChildContext",value:function(){return this.props.user?{user:this.props.user}:{user:this.context.user}}},{key:"render",value:function(){return c["default"].createElement(e,a({user:this.context.user},this.props))}}]),n}(u.Component),t.displayName="UserConnected("+(0,d["default"])(e)+")",t.propTypes=s,t.contextTypes=s,t.childContextTypes=s,n}Object.defineProperty(exports,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();exports["default"]=s;var u=t(1),c=n(u),p=t(31),d=n(p)},31:function(e,exports){"use strict";function t(e){return e.displayName||e.name||"Component"}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=t},49:function(e,exports,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addAuthorList=exports.updateAuthor=exports.addNew=void 0;var r,o=t(72),i=t(3),s=(0,o.createDuck)("authors"),a=s.defineType("ADD_AUTHOR"),l=s.defineType("UPDATE_AUTHOR"),u=s.defineType("ADD_AUTHOR_LIST");exports.addNew=s.createAction(a),exports.updateAuthor=s.createAction(l),exports.addAuthorList=s.createAction(u);exports["default"]=s.createReducer((r={},n(r,a,function(e,t){var n=t.payload,r=void 0===n?{}:n;return e.set(r.id.toString(),(0,i.Map)(r))}),n(r,l,function(e,t){var n=t.payload,r=void 0===n?{}:n,o=e.list.get(r.id.toString()).merge(r);return e.set(r.id.toString(),o)}),n(r,u,function(e,t){var n=t.payload,r=void 0===n?{}:n;return e.merge((0,i.fromJS)(r))}),r),(0,i.Map)())},50:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return function(t){var n,s;return(0,y["default"])((s=n=function(n){function s(){return r(this,s),o(this,Object.getPrototypeOf(s).apply(this,arguments))}return i(s,n),p(s,[{key:"render",value:function(){return f["default"].createElement(t,c({hasPermissions:e({isLogged:this.isLogged,isFreeUser:this.isFreeUser,isPaidUser:this.isPaidUser,isStudent:this.isStudent,isTeacher:this.isTeacher,isOrganizer:this.isOrganizer,isPaidCourse:this.isPaidCourse})},this.props))}},{key:"isLogged",get:function(){return"unlogged"!==this.props.user.type}},{key:"isFreeUser",get:function(){return"free"===this.props.user.type}},{key:"isPaidUser",get:function(){return"paid"===this.props.user.type}},{key:"isStudent",get:function(){return"student"===this.props.user.role}},{key:"isTeacher",get:function(){return"teacher"===this.props.user.role}},{key:"isOrganizer",get:function(){return"organizer"===this.props.user.role}},{key:"isPaidCourse",get:function(){return this.props.course.paid}}]),s}(d.Component),n.displayName="Permissions("+(0,g["default"])(t)+")",n.propTypes={course:d.PropTypes.object.isRequired,user:d.PropTypes.object.isRequired},n.defaultProps={course:{paid:!0},user:{type:"unlogged",role:"student"}},s))}}function a(e){return e.isOrganizer?!0:e.isLogged}function l(e){return e.isOrganizer?!0:e.isPaidUser}function u(e){return e.isOrganizer?!0:e.isLogged?!e.isFreeUser||!e.isPaidCourse:!1}Object.defineProperty(exports,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();exports.onlyLogged=a,exports.onlyPaid=l,exports.onlyOnFree=u;var d=t(1),f=n(d),h=t(30),y=n(h),m=t(31),g=n(m);exports["default"]=s},72:function(e,exports,t){e.exports=t(2)(1074)},78:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return o("figure",{className:e.className},void 0,o("img",{alt:e.alt,src:e.source,height:e.size.toString(),width:e.size.toString()}))}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),i=t(1),s=(n(i),"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nNTBweCcgaGVpZ2h0PSc1MHB4JyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCIgY2xhc3M9InVpbC1kZWZhdWx0Ij48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0ibm9uZSIgY2xhc3M9ImJrIj48L3JlY3Q+PHJlY3QgIHg9JzQ2JyB5PSc0MCcgd2lkdGg9JzgnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nI2MwYzBjMCcgdHJhbnNmb3JtPSdyb3RhdGUoMCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScwLjdzJyBiZWdpbj0nMHMnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0NicgeT0nNDAnIHdpZHRoPSc4JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNjMGMwYzAnIHRyYW5zZm9ybT0ncm90YXRlKDQ1IDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzAuN3MnIGJlZ2luPScwLjA4NzVzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYnIHk9JzQwJyB3aWR0aD0nOCcgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjYzBjMGMwJyB0cmFuc2Zvcm09J3JvdGF0ZSg5MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScwLjdzJyBiZWdpbj0nMC4xNzVzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYnIHk9JzQwJyB3aWR0aD0nOCcgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjYzBjMGMwJyB0cmFuc2Zvcm09J3JvdGF0ZSgxMzUgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMC43cycgYmVnaW49JzAuMjYyNDk5OTk5OTk5OTk5OTZzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYnIHk9JzQwJyB3aWR0aD0nOCcgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjYzBjMGMwJyB0cmFuc2Zvcm09J3JvdGF0ZSgxODAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMC43cycgYmVnaW49JzAuMzVzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYnIHk9JzQwJyB3aWR0aD0nOCcgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjYzBjMGMwJyB0cmFuc2Zvcm09J3JvdGF0ZSgyMjUgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMC43cycgYmVnaW49JzAuNDM3NXMnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0NicgeT0nNDAnIHdpZHRoPSc4JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNjMGMwYzAnIHRyYW5zZm9ybT0ncm90YXRlKDI3MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScwLjdzJyBiZWdpbj0nMC41MjQ5OTk5OTk5OTk5OTk5cycgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz48L3JlY3Q+PHJlY3QgIHg9JzQ2JyB5PSc0MCcgd2lkdGg9JzgnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nI2MwYzBjMCcgdHJhbnNmb3JtPSdyb3RhdGUoMzE1IDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzAuN3MnIGJlZ2luPScwLjYxMjQ5OTk5OTk5OTk5OTlzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48L3N2Zz4=");r.propTypes={className:i.PropTypes.string,alt:i.PropTypes.string,source:i.PropTypes.string,size:i.PropTypes.number},r.defaultProps={className:"Loader",alt:"Loader",source:s,size:50},exports["default"]=r},84:function(e,exports,t){e.exports=t(2)(1071)},85:function(e,exports,t){e.exports=t(2)(1075)},86:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=t.payload,r=void 0===n?{}:n,o=e.set(r.id.toString(),(0,c.fromJS)(r));if(!r.parent_id)return o;if(!o.has(r.parent_id.toString()))return o;var i=o.get(r.parent_id.toString());if(i.get("comments").has(r.id))return o;var s=i.set("comments",i.get("comments").push(r.id));return o.set(r.parent_id.toString(),s)}function i(e,t){if(!e.has(t))return e;var n=e.get(t);return e.set(t,n.set("n_stars",n.get("n_stars")+1))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.unlike=exports.like=exports.resetPage=exports.prevPage=exports.nextPage=exports.highlight=exports.changeFilter=exports.addList=exports.remove=exports.changeList=exports.update=exports.addNew=exports.add=void 0;var s,a,l=t(85),u=t(72),c=t(3),p=t(108),d=n(p),f=t(109),h=n(f),y=(0,u.createDuck)("comments","comments"),m=(0,h["default"])(y),g=m.actions,b=m.reducer,v=(0,d["default"])(y),w=v.actions,P=v.reducer,T=y.defineType("ADD"),j=y.defineType("UPDATE"),S=y.defineType("REMOVE"),C=y.defineType("ADD_NEW"),M=y.defineType("LIKE"),k=y.defineType("UNLIKE"),O=y.defineType("ADD_LIST"),_=y.defineType("SET_HIGHLIGHT"),I=y.defineType("CHANGE_COMMENT_FILTER"),D=y.defineType("CHANGE_LIST"),A=(exports.add=y.createAction(T),exports.addNew=y.createAction(C),exports.update=y.createAction(j),exports.changeList=y.createAction(D),exports.remove=y.createAction(S),exports.addList=y.createAction(O),exports.changeFilter=y.createAction(I),exports.highlight=y.createAction(_),exports.nextPage=g.nextPage,exports.prevPage=g.prevPage,exports.resetPage=g.resetPage,exports.like=w.like,exports.unlike=w.unlike,y.createReducer((s={},r(s,C,o),r(s,T,o),r(s,S,function(e,t){var n=t.payload,r=void 0===n?{}:n;if(!e.has(r.id.toString()))return e;var o=e.get(r.id.toString()).set("deleted",!0);if(r.parent_id){var i=e.get(r.parent_id.toString());i=i.set("comments",i.get("comments").filterNot(function(e){return e===r.id}));var s=e.set(r.id.toString(),o).set(r.parent_id.toString(),i);return s}return e.set(r.id.toString(),o)}),r(s,O,function(e,t){var n=t.payload,r=void 0===n?{}:n,o=e.merge((0,c.fromJS)(r.comments));if(!r.parentId)return o;var i=o.get(r.parentId.toString()),s=i.set("comments",i.get("comments").concat((0,c.List)(r.list)));return o.set(r.parentId.toString(),s)}),r(s,j,function(e,t){var n=t.payload,r=void 0===n?{}:n,o=e.get(r.id.toString()).merge((0,c.Map)(r));return e.set(r.id.toString(),o)}),r(s,M,function(e,t){var n=t.payload,r=void 0===n?{}:n;return r.id?i(e,r.id.toString()):r.length<1?e:e}),r(s,k,function(e,t){var n=t.payload,r=void 0===n?{}:n;if(!e.has(r.id.toString()))return e;var o=e.get(r.id.toString());return e.set(r.id.toString(),o.set("n_stars",o.get("n_stars")-1))}),s),(0,c.Map)())),R=y.createReducer(r({},I,function(e,t){var n=t.payload,r=void 0===n?{}:n;return r.filter}),"-stars_count"),N=y.createReducer((a={},r(a,T,function(e,t){var n=t.payload,r=void 0===n?{}:n;return r.parent_id?e:e.push(r.id)}),r(a,C,function(e,t){var n=t.payload,r=void 0===n?{}:n;return r.parent_id?e:e.reverse().push(r.id).reverse()}),r(a,D,function(e,t){var n=t.payload,r=void 0===n?{}:n;return r.list}),r(a,O,function(e,t){var n=t.payload,r=void 0===n?{}:n;return r.parentId?e:r.list.length<1?e:e.concat(r.list)}),r(a,S,function(e,t){var n=t.payload,r=void 0===n?{}:n;return r.parentId?e:e.filterNot(function(e){return e===r.id})}),a),(0,c.List)()),x=y.createReducer(r({},_,function(e,t){var n=t.payload,r=void 0===n?{}:n;return r.id}),null);exports["default"]=(0,l.combineReducers)({data:A,likes:P,list:N,pagination:b,highlighted:x,filter:R})},90:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var s,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t(1),c=(n(u),a=s=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"getChildContext",value:function(){return{user:this.props.user}}},{key:"render",value:function(){return u.Children.only(this.props.children)}}]),t}(u.Component),s.propTypes={user:u.PropTypes.oneOfType([u.PropTypes.object,u.PropTypes.oneOf([!1])]),children:u.PropTypes.node.isRequired},s.defaultProps={user:!1},s.childContextTypes={user:u.PropTypes.oneOfType([u.PropTypes.object,u.PropTypes.oneOf([!1])])},a);exports["default"]=c},91:function(e,exports,t){e.exports=t(2)(1362)},93:function(e,exports,t){e.exports=t(2)(85)},94:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=t(189),o=t(7),i=n(o),s=t(8),a=n(s),l=t(11),u=n(l);(0,a["default"])(i["default"]);var c={comments:{retrieve:function(e){var t=arguments.length<=1||void 0===arguments[1]?"material":arguments[1],n=arguments.length<=2||void 0===arguments[2]?1:arguments[2],o=arguments.length<=3||void 0===arguments[3]?"-created":arguments[3],s=new FormData,a=o;s.append("object_type",t),s.append("object_id",e),s.append("page",n);var l="/comments/list/",c={object_type:t,object_id:e,page:n,order_by:a},p=l+"?"+(0,r.stringify)(c);return i["default"].get(p).set("X-CSRFToken",(0,u["default"])(document.cookie).csrftoken).set("X-Requested-With","XMLHttpRequest").send(s)},create:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"material":arguments[2],r=arguments.length<=3||void 0===arguments[3]?null:arguments[3],o=new FormData;return o.append("object_type",n),o.append("object_id",t),o.append("content",e),r&&o.append("parent_id",r),i["default"].post("/comments/add/").set("X-CSRFToken",(0,u["default"])(document.cookie).csrftoken).set("X-Requested-With","XMLHttpRequest").send(o)},toggleStar:function(e){if(!e)return Promise.reject(new ReferenceError("The ID is required."));if("number"!=typeof e)return Promise.reject(new TypeError("The ID must be a number."));var t=new FormData;return t.append("object_type","comment"),t.append("object_id",e),i["default"].post("/discussions/star/toggle/").set("X-CSRFToken",(0,u["default"])(document.cookie).csrftoken).set("X-Requested-With","XMLHttpRequest").send(t)},remove:function(e){return e?"number"!=typeof e?Promise.reject(new TypeError("The ID must be a number.")):i["default"].post("/comments/"+e+"/delete/").set("X-CSRFToken",(0,u["default"])(document.cookie).csrftoken).set("X-Requested-With","XMLHttpRequest"):Promise.reject(new ReferenceError("The ID is required."))},markAsBest:function(e){return e?"number"!=typeof e?Promise.reject(new TypeError("ID must be a number")):i["default"].post("/discussions/"+e+"/best_answer/").set("X-CSRFToken",(0,u["default"])(document.cookie).csrftoken).set("X-Requested-With","XMLHttpRequest"):Promise.reject(new ReferenceError("The ID is required."))},getMore:function(e,t,n,o){if(!e)return Promise.reject(new ReferenceError("discussionId should be defined."));if(1>e)return Promise.reject(new RangeError("discussionId should be greater than 0."));if(1>t)return Promise.reject(new RangeError("number should be greater than 0."));var s={page:t,object_id:n,object_type:o,parent_id:e},a="/comments/list/",l=a+"?"+(0,r.stringify)(s);return i["default"].get(l).set("X-CSRFToken",(0,u["default"])(document.cookie).csrftoken).set("X-Requested-With","XMLHttpRequest")}}};exports["default"]=c},99:function(e,exports){"use strict";function t(e){return n[e]}Object.defineProperty(exports,"__esModule",{value:!0});var n={0:"unk",1:"mouse1",2:"mouse2",3:"break",4:"mouse3",5:"mouse4",6:"mouse5",8:"backspace",9:"tab",12:"clear",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",21:"imehangul",23:"imejunja",24:"imefinal",25:"imekanji",27:"escape",28:"imeconvert",29:"imenonconvert",30:"imeaccept",31:"imemodechange",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",41:"select",42:"print",43:"execute",44:"snapshot",45:"insert",46:"delete",47:"help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:";",60:"<",61:"=",62:">",63:"?",64:"@",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"meta",92:"meta",93:"menu",95:"sleep",96:"num0",97:"num1",98:"num2",99:"num3",100:"num4",101:"num5",102:"num6",103:"num7",104:"num8",105:"num9",106:"num*",107:"num+",108:"numenter",109:"num-",110:"num.",111:"num/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",124:"f13",125:"f14",126:"f15",127:"f16",128:"f17",129:"f18",130:"f19",131:"f20",132:"f21",133:"f22",134:"f23",135:"f24",144:"numlock",145:"scrolllock",160:"shiftleft",161:"shiftright",162:"ctrlleft",163:"ctrlright",164:"altleft",165:"altright",166:"browserback",167:"browserforward",168:"browserrefresh",169:"browserstop",170:"browsersearch",171:"browserfavorites",172:"browserhome",173:"volumemute",174:"volumedown",175:"volumeup",176:"nexttrack",177:"prevtrack",178:"stop",179:"playpause",180:"launchmail",181:"launchmediaselect",182:"launchapp1",183:"launchapp2",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"meta",224:"meta",226:"altgr",229:"imeprocess",231:"unicode",246:"attention",247:"crsel",248:"exsel",249:"eraseeof",250:"play",251:"zoom",252:"noname",253:"pa1",254:"clear"};exports["default"]=t},102:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t(113);var c=t(1),p=n(c),d=t(84),f=n(d),h=t(91),y=n(h),m=t(3),g=t(7),b=n(g),v=t(8),w=n(v),P=t(110),T=n(P),j=t(99),S=n(j),C=t(11),M=n(C),k=t(116),O=n(k),_=t(105),I=n(_),D=t(104),A=n(D),R=t(107),N=n(R),x=t(106),E=n(x),J=t(103),z=n(J);(0,w["default"])(b["default"]);var F={isMain:c.PropTypes.bool,defaultValue:c.PropTypes.string,baseClass:c.PropTypes.string,title:c.PropTypes.string,features:c.PropTypes.objectOf(c.PropTypes.shape({button:c.PropTypes.element,updater:c.PropTypes.func.isRequired,handler:c.PropTypes.func.isRequired,shortcuts:c.PropTypes.arrayOf(c.PropTypes.string)})),textarea:c.PropTypes.object,markdown:c.PropTypes.object,preview:c.PropTypes.object,onChange:c.PropTypes.func,onClick:c.PropTypes.func,ref:c.PropTypes.func,defaultMode:c.PropTypes.oneOf(["normal","wide"]),messages:c.PropTypes.object,wideMode:c.PropTypes.bool,onSubmit:c.PropTypes.func,buttons:c.PropTypes.object,tranformations:c.PropTypes.object,handlers:c.PropTypes.object},B={isMain:!1,defaultValue:"",baseClass:"PulseEditor",title:null,features:{},textarea:{},markdown:{},preview:{},onChange:null,onClick:null,ref:null,defaultMode:"normal",messages:{},wideMode:!1,buttons:{},tranformations:{},handlers:{}},L=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={content:e.defaultValue,expanded:!1,mode:e.defaultMode,uploading:!1,view:"field"},n.id=(0,y["default"])(),n.handleInput=n.handleInput.bind(n),n.handleChangeView=n.handleChangeView.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleExpandClick=n.handleExpandClick.bind(n),n.handleContractClick=n.handleContractClick.bind(n),n.handleEditorClick=n.handleEditorClick.bind(n),n.handleScroll=n.handleScroll.bind(n),n.previewRef=n.previewRef.bind(n),n.handleEditorDrop=n.handleEditorDrop.bind(n),n.parser=(0,O["default"])(e.markdown),n}return i(t,e),u(t,[{key:"clearContent",value:function(){this.setState({content:""}),this.props.isMain&&sessionStorage.removeItem("editor-"+window.location.href)}},{key:"handleInput",value:function(e){var t=this,n=e.target.value;this.setState({content:n},function(){t.props.isMain&&sessionStorage.setItem("editor-"+window.location.href,n),t.handleChange(e)})}},{key:"handleChangeView",value:function(e){var t=e.currentTarget.name;t&&this.setState({view:t})}},{key:"handleButtonTransform",value:function(e){var t=this;return function(n){n.persist();var r=t.props.features[e],o=(0,I["default"])(t.domField),i=(0,A["default"])(t.state.content,o),s=r.updater(i,t.state.content,o),a=(0,N["default"])(t.state.content,o,s);t.setState({content:a},function(){var e=t.domField.scrollTop;if(t.domField.focus(),t.domField.scrollTop=e,r.handler){var u=r.handler(l({},n,{content:a,field:t.domField,updated:s,selection:o,selected:i}));(0,E["default"])(u,t.domField)}t.props.isMain&&sessionStorage.setItem("editor-"+window.location.href,a),t.props.onChange&&t.handleChange(n)})}}},{key:"handleKeyDown",value:function(e){var t=this,n=e.keyCode||e.which;switch((0,S["default"])(n)){case"tab":var r=function(){e.preventDefault();var n=(0,I["default"])(t.domField),r=n.start,o=n.end,i=t.state.content,s=i.substring(0,r)+"	"+i.substring(o);return{v:t.setState({content:s},function(){t.domField.selectionEnd=r+1})}}();if("object"===("undefined"==typeof r?"undefined":a(r)))return r.v;case"esc":return this.state.expanded?(e.preventDefault(),this.handleContractClick()):e;case"b":if((0,T["default"])()){if(!e.metaKey)return e}else if(!e.ctrlKey||e.altKey)return e;return e.preventDefault(),this.handleButtonTransform("bold")(e);case"e":if((0,T["default"])()){if(!e.metaKey)return e}else if(!e.ctrlKey||e.altKey)return e;return this.state.expanded?e:(e.preventDefault(),this.handleExpandClick());case"i":if((0,T["default"])()){if(!e.metaKey)return e}else if(!e.ctrlKey||e.altKey)return e;return e.preventDefault(),e.shiftKey?this.handleButtonTransform("image")(e):this.handleButtonTransform("italic")(e);case"k":if((0,T["default"])()){if(!e.metaKey)return e}else if(!e.ctrlKey||e.altKey)return e;return e.preventDefault(),e.shiftKey?this.handleButtonTransform("code")(e):this.handleButtonTransform("link")(e);case"l":return!e.ctrlKey||e.altKey?e:(e.preventDefault(),this.handleButtonTransform("list")(e));case"q":return!e.cltrKey||e.altKey?e:(e.preventDefault(),this.handleButtonTransform("quote")(e));case"u":if((0,T["default"])()){if(!e.metaKey)return e}else if(!e.ctrlKey)return e;return e.preventDefault(),e.altKey?this.handleButtonTransform("strike")(e):this.handleButtonTransform("underline")(e);default:return e}}},{key:"handleExpandClick",value:function(){var e=this,t=0,n=0;return this.domField&&(t=this.domField.selectionStart,n=this.domField.selectionEnd),this.setState({expanded:!0}),document.body.setAttribute("style","height: 100vh; overflow: hidden;"),setTimeout(function(){(0,E["default"])({start:t,end:n},e.domField),e.domField.scrollTop=0},300)}},{key:"handleContractClick",value:function(){var e=this,t=0,n=0;return this.domField&&(t=this.domField.selectionStart,n=this.domField.selectionEnd),this.setState({expanded:!1}),document.body.removeAttribute("style"),setTimeout(function(){return(0,E["default"])({start:t,end:n},e.domField)},300)}},{key:"handleScroll",value:function(e){if(this.state.expanded||"wide"===this.state.mode){var t=e.target.scrollTop;this.previewNode.scrollTop=t}}},{key:"handleChange",value:function(e){if(!this.props.onChange)return null;var t=(0,I["default"])(this.domField),n=(0,A["default"])(this.state.content,t);return this.props.onChange((0,z["default"])(n,t,this.state.content,e,this.parser(this.state.content,this.props.markdown)))}},{key:"handleEditorClick",value:function(e){var t=this;window.matchMedia("(min-width: 768px)").matches&&this.props.wideMode&&"normal"===this.state.mode&&this.setState({mode:"wide"},function(){return t.domField.focus()}),this.props.onClick&&this.props.onClick(e)}},{key:"handleEditorDrop",value:function(e){var t=this;if(e.preventDefault(),this.state.uploading||0===e.dataTransfer.files.length)return null;var n=e.dataTransfer.files[0],r=new FormData;r.append("file",n);var o=n.name,i=(0,I["default"])(this.domField),s="!["+this.props.messages.editor.uploading+"]()",a=(0,N["default"])(this.state.content,i,s),l={start:i.start,end:i.end+s.length};return(0,E["default"])(l,this.domField),this.setState({content:a,uploading:!0},function(){var e=b["default"].post("/upload_images/").set("X-CSRFToken",(0,M["default"])(document.cookie).csrftoken).set("X-Requested-With","XMLHttpRequest").send(r);return e.then(function(e){var n=e.body.path,r="!["+o+"]("+n+")",s=(0,N["default"])(t.state.content,l,r),a={start:i.start,end:i.end+r.length};return(0,E["default"])(a,t.domField),t.setState({content:s,uploading:!1},function(){t.props.isMain&&sessionStorage.setItem("editor-"+window.location.href,s)})})["catch"](function(e){var n=e.message,r="!["+n+"]()",o=(0,N["default"])(t.state.content,l,r),s={start:i.start,end:i.end+r.length};return(0,E["default"])(s,t.domField),t.setState({content:o,uploading:!1})})})}},{key:"previewRef",value:function(e){this.previewNode=e}},{key:"render",value:function(){return s("div",{className:this.props.baseClass+" "+(this.state.expanded&&"is-expanded"),onClick:this.handleEditorClick,onDrop:this.handleEditorDrop},void 0,s("div",{className:this.props.baseClass+"-toolbar "+(this.state.expanded&&"is-expanded")},void 0,s("div",{className:this.props.baseClass+"-toolbar-left"},void 0,this.buttons),s("div",{className:this.props.baseClass+"-toolbar-right"},void 0,this.state.expanded?this.contractButton:this.expandButton,this.fieldButton)),this.content,this.props.title&&this.state.expanded&&s("div",{className:this.props.baseClass+"-toolbar is-expanded is-bottom"},void 0,s("div",{className:this.props.baseClass+"-toolbar-left"}),s("div",{className:this.props.baseClass+"-toolbar-right"},void 0,s("strong",{style:{marginRight:".5em"}},void 0,this.props.messages.bottom.title),s("input",{className:this.props.baseClass+"-title",type:"text",value:this.props.title,name:"title",onChange:this.handleChange,disabled:!0}))))}},{key:"domField",get:function(){return document.getElementById("textarea-"+this.id)}},{key:"field",get:function(){return this.state.expanded?p["default"].createElement("textarea",l({},this.props.textarea,{className:this.props.baseClass+"-field",value:this.state.content,onChange:this.handleInput,onKeyDown:this.handleKeyDown,onScroll:this.handleScroll,name:"content",id:"textarea-"+this.id,disabled:this.state.uploading})):p["default"].createElement(f["default"],l({},this.props.textarea,{className:this.props.baseClass+"-field",value:this.state.content,onChange:this.handleInput,onKeyDown:this.handleKeyDown,onScroll:this.handleScroll,name:"content",id:"textarea-"+this.id,maxRows:10,disabled:this.state.uploading}))}},{key:"preview",get:function(){return p["default"].createElement("div",l({},this.props.preview,{ref:this.previewRef,className:this.props.baseClass+"-preview "+(this.props.preview.className||""),dangerouslySetInnerHTML:{__html:this.parser(this.state.content)}}))}},{key:"fieldButton",
get:function(){return this.props.buttons.field?"field"===this.state.view||this.state.expanded?null:s("div",{className:this.props.baseClass+"-buttonGroup"},void 0,p["default"].createElement("button",{className:this.props.baseClass+"-button is-field",onClick:this.handleChangeView,name:"field",type:"button",ref:"button-field",disabled:"field"===this.state.view},this.props.buttons.field)):null}},{key:"previewButton",get:function(){return this.props.buttons.preview?"preview"===this.state.view||this.state.expanded?null:"wide"===this.state.mode?null:s("div",{className:this.props.baseClass+"-buttonGroup"},void 0,p["default"].createElement("button",{className:this.props.baseClass+"-button is-preview",onClick:this.handleChangeView,name:"preview",type:"button",ref:"button-preview",disabled:"preview"===this.state.view},this.props.buttons.preview)):null}},{key:"expandButton",get:function(){return s("div",{className:this.props.baseClass+"-buttonGroup"},void 0,s("button",{className:this.props.baseClass+"-button is-expand",onClick:this.handleExpandClick,name:"expand",type:"button",disabled:this.state.expanded},void 0,this.props.buttons.expand))}},{key:"contractButton",get:function(){return s("div",{className:this.props.baseClass+"-buttonGroup"},void 0,s("button",{className:this.props.baseClass+"-button is-contract",onClick:this.handleContractClick,name:"contract",type:"button",disabled:!this.state.expanded},void 0,this.props.buttons.contract))}},{key:"buttons",get:function(){var e=this;return"preview"!==this.state.view||this.state.expanded?(0,m.Map)(this.props.features).sortBy(function(e){return e.order}).filter(function(e){return!!e.button}).groupBy(function(e){return e.group||1}).map(function(t){return s("div",{className:e.props.baseClass+"-buttonGroup"},t,t.map(function(t,n){return p["default"].createElement("button",{className:e.props.baseClass+"-button",onClick:e.handleButtonTransform(n),name:n,key:n,type:"button",ref:"button-"+n,disabled:"preview"===e.state.view},t.button)}).toArray())}).toArray():null}},{key:"content",get:function(){if(this.state.expanded)return s("div",{className:this.props.baseClass+"-expanded"},void 0,this.field,this.preview);if("wide"===this.state.mode)return s("div",{style:{width:"100%"}},void 0,s("div",{className:this.props.baseClass+"-wide"},void 0,this.field,this.preview),s("div",{className:this.props.baseClass+"-helpbar"},void 0,s("div",{},void 0,this.props.messages.helpbar.markdown),s("div",{},void 0,this.props.messages.helpbar.preview)));if("normal"===this.state.mode){if("preview"===this.state.view)return this.preview;if("field"===this.state.view)return this.field}return null}}]),t}(c.Component);L.propTypes=F,L.defaultProps=B,exports["default"]=L},103:function(e,exports){"use strict";function t(e,t,r,o,i){if("string"!=typeof e)throw new TypeError("The selected content value must be a string.");if("object"!==("undefined"==typeof t?"undefined":n(t)))throw new TypeError("The selection must be an object.");if("number"!=typeof t.start)throw new TypeError("The selection start value must be a number.");if("number"!=typeof t.end)throw new TypeError("The selection end value must be a number.");if("string"!=typeof r)throw new TypeError("The full content value must be a string.");if("object"!==("undefined"==typeof o?"undefined":n(o)))throw new TypeError("The native event must be an object.");if("string"!=typeof i)throw new TypeError("The parsed content value must be a string.");return{selected:e,selection:t,full:r,"native":o,parsed:i}}Object.defineProperty(exports,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports["default"]=t},104:function(e,exports){"use strict";function t(e,t){if("string"!=typeof e)throw new TypeError("The content must be a string.");if("object"!==("undefined"==typeof t?"undefined":n(t)))throw new TypeError("The selection must be an object.");if("number"!=typeof t.start)throw new TypeError("The selection start value must be a number.");if("number"!=typeof t.end)throw new TypeError("The selection end value must be a number.");return e.slice(t.start,t.end)}Object.defineProperty(exports,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports["default"]=t},105:function(e,exports){"use strict";function t(e){if("object"!==("undefined"==typeof e?"undefined":n(e)))throw new TypeError("The field must be an object.");if(!(e instanceof Element))throw new TypeError("The field must be an instance of Element.");return{start:e.selectionStart,end:e.selectionEnd}}Object.defineProperty(exports,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports["default"]=t},106:function(e,exports){"use strict";function t(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=arguments[1];if(!e)return null;if("object"!==("undefined"==typeof e?"undefined":n(e)))throw new TypeError("The selection must be an object.");if("number"!=typeof e.start)throw new TypeError("The selection start value must be a number.");if("number"!=typeof e.end)throw new TypeError("The selection end value must be a number.");if("object"!==("undefined"==typeof t?"undefined":n(t)))throw new TypeError("The field must be an object.");if(!(t instanceof Element))throw new TypeError("The field must be an instance of Element.");if(t.setSelectionRange)return t.setSelectionRange(e.start,e.end),null;if(!t.createTextRange)return null;var r=t.createTextRange();return r.collapse(!0),r.moveStart("character",e.end),r.moveEnd("character",e.end),r.select(),null}Object.defineProperty(exports,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports["default"]=t},107:function(e,exports){"use strict";function t(e,t,r){if("string"!=typeof e)throw new TypeError("The content value must be a string.");if("object"!==("undefined"==typeof t?"undefined":n(t)))throw new TypeError("The selection must be an object.");if("number"!=typeof t.start)throw new TypeError("The selection start value must be a number.");if("number"!=typeof t.end)throw new TypeError("The selection end value must be a number.");if("string"!=typeof r)throw new TypeError("The updated content value must be a string.");return e.slice(0,t.start)+r+e.slice(t.end)}Object.defineProperty(exports,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports["default"]=t},108:function(e,exports,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t,r=e.defineType("LIKE"),i=e.defineType("UNLIKE"),s=e.createAction(r),a=e.createAction(i),l=e.createReducer((t={},n(t,r,function(e,t){var n=t.payload,r=void 0===n?{}:n;if(Array.isArray(r)){var i=(0,o.List)(r);return e.concat(i)}return e.push(r.id)}),n(t,i,function(e,t){var n=t.payload,r=void 0===n?{}:n;return e.filterNot(function(e){return e===r.id})}),t),(0,o.List)());return{actions:{like:s,unlike:a},reducer:l}}Object.defineProperty(exports,"__esModule",{value:!0});var o=t(3);exports["default"]=r},109:function(e,exports,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t,r=e.defineType("NEXT_PAGE"),o=e.defineType("PREV_PAGE"),s=e.defineType("RESET_PAGE"),a=e.createAction(r),l=e.createAction(s),u=e.createAction(o),c=e.createReducer((t={},n(t,s,function(e){return e.set("current",1)}),n(t,r,function(e){var t=e.get("current")+1;return t>e.total?e:e.set("current",t)}),n(t,o,function(e){var t=e.get("current")-1;return 0>=t?e:e.set("current",t)}),t),i);return{actions:{nextPage:a,prevPage:u,resetPage:l},reducer:c}}Object.defineProperty(exports,"__esModule",{value:!0});var o=t(3),i=(0,o.Map)({current:1,total:1});exports["default"]=r},110:function(e,exports){"use strict";function t(){return!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=t},113:function(e,exports){},116:function(e,exports,t){e.exports=t(2)(1)},117:function(e,exports,t){e.exports=t(2)(1105)},119:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n="organizer"===t.user.role;if(!e.has("discussion"))return{isOwner:!1,isOrganizer:n};var r=t.user.id,o=r===e.get("discussion").get("discussionData").get("author_id");return{isOwner:o,isOrganizer:n}}function o(e){if(e.parentId)return null;if(!e.isOrganizer&&!e.isOwner)return null;var t=(0,c["default"])("ButtonBestAnswer",e.className,{"is-mobile":e.isMobile});return i("button",{onClick:e.onClick,className:t},void 0,y," ",e.getIntlMessage("comments.bestAnswer"))}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t(172);var s=t(1),a=(n(s),t(9)),l=t(22),u=t(12),c=n(u),p=t(17),d=n(p),f=t(30),h=n(f),y=i("span",{className:"icon-check"});o.propTypes={onClick:s.PropTypes.func,className:s.PropTypes.string,isMobile:s.PropTypes.bool,isOwner:s.PropTypes.bool.isRequired,isContribution:s.PropTypes.bool,isOrganizer:s.PropTypes.bool,getIntlMessage:s.PropTypes.func.isRequired,parentId:s.PropTypes.number},o.defaultProps={onClick:function(){},className:"",isMobile:!1,isOrganizer:!1,isContribution:!1,parentId:null};var m=(0,l.compose)(h["default"],d["default"],(0,a.connect)(r));exports["default"]=m(o)},120:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function a(e,t){var n=e.get("comments"),r=e.get("authors");if(!n.get("data").has(t.id.toString()))return{notFound:!0};var o=n.get("data").get(t.id.toString()),i=o.get("author_id").toString(),s=-1!==n.get("likes").toArray().indexOf(t.id),a=n.get("highlighted")===t.id;if(!r.has(i.toString()))return h({},o.toJS(),{liked:s,highlighted:a,author:{avatar:"",id:parseInt(i,10),username:"An√≥nimo",score:0}});var l=r.get(o.get("author_id").toString());return h({},o.toJS(),{liked:s,highlighted:a,author:w.Map.isMap(l)?l.toJS():l})}Object.defineProperty(exports,"__esModule",{value:!0});var l,u,c,p,d,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t(173),t(135);var m=t(1),g=n(m),b=t(9),v=t(6),w=t(3),P=t(14),T=n(P),j=t(10),S=n(j);t(19);var C=t(49),M=t(86),k=t(122),O=n(k),_=t(121),I=n(_),D=t(159),A=n(D),R=t(158),N=n(R),x=t(154),E=n(x),J=t(156),z=n(J),F=t(119),B=n(F),L=t(78),H=n(L),Z=t(17),G=n(Z),W=t(30),V=n(W),q=t(94),X=n(q),Y=function(e){return y("span",{},void 0,e.children)},U=function(){};"undefined"!=typeof window&&(Y=t(162)["default"],U=t(117));var K=y("div",{className:"Comment-loader"},void 0,y(H["default"],{})),Q=(l=(0,b.connect)(a,null,null,{pure:!0}),l(u=(0,G["default"])(u=(0,V["default"])((d=p=function(e){function t(){var e,n,i,s;r(this,t);for(var a=arguments.length,l=Array(a),u=0;a>u;u++)l[u]=arguments[u];return n=i=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={showForm:!1,canDelete:!1,isLoading:!1,currentResponses:i.props.n_responses>3,currentPage:1,isBigger:!1,viewMore:!1},s=n,o(i,s)}return i(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){Array.from(e.content.querySelectorAll("pre")).forEach(function(e){return window.hljs.highlightBlock(e)});var t=e.content;210===t.clientHeight&&e.setState({isBigger:!0})},1e3)}},{key:"shouldComponentUpdate",value:function(e,t){var n=JSON.stringify(e)!==JSON.stringify(this.props)||JSON.stringify(t)!==JSON.stringify(this.state);return n}},{key:"handleStar",value:function(e){e.preventDefault();var t=this.props,n=t.dispatch,r=t.liked,o=t.id;n(r?(0,M.unlike)({id:o}):(0,M.like)({id:o})),X["default"].comments.toggleStar(this.props.id)["catch"](function(e){n(r?(0,M.like)({id:o}):(0,M.unlike)({id:o}))})}},{key:"handleReply",value:function(e){e.preventDefault(),this.setState({showForm:!this.state.showForm})}},{key:"handleSend",value:function(e){return e?void 0:this.setState({showForm:!1})}},{key:"handleDelete",value:function(){var e=this;return this.state.canDelete?X["default"].comments.remove(this.props.id).then(function(){e.props.dispatch((0,M.remove)({id:e.props.id,parent_id:e.props.parent_id||null}))})["catch"](function(t){return e.setState({canDelete:!1})}):this.setState({canDelete:!0})}},{key:"handleMouseLeave",value:function(){return this.state.canDelete?this.setState({canDelete:!1}):null}},{key:"handleHighlightClick",value:function(){var e=this;X["default"].comments.markAsBest(this.props.id).then(function(){var t=e.scrollToBestAnswer();setTimeout(function(){e.props.dispatch((0,M.highlight)({id:e.props.id}))},t)})["catch"](function(e){return console.error})}},{key:"scrollToBestAnswer",value:function(){var e=document.getElementById("best-editor"),t=1700,n=850,r=document.body.offsetHeight*n/t;return U(0,e.offsetTop,{ease:"outBack",duration:r}),window.location.hash="#best-answer",r}},{key:"handleGetMore",value:function(e){var t=this;e.preventDefault();var n=this.state,r=n.currentPage,o=(n.currentResponses,this.props),i=o.objectData,s=i.objectId,a=i.objectType,l=o.id,u=o.n_responses;this.setState({isLoading:!0}),X["default"].comments.getMore(l,r+1,s,a).then(function(e){var n=e.body,o=n.authors,i=n.comments,s=n.first_comments,a=n.stars.comments;t.setState({currentResponses:u/3>t.state.currentPage+1,currentPage:r+1,isLoading:!1});var c=(0,C.addAuthorList)(o);t.props.dispatch(c);var p=(0,M.addList)({comments:i,list:s,parentId:l});if(t.props.dispatch(p),a&&a.length>0){var d=(0,M.like)(a);t.props.dispatch(d)}})["catch"](function(){t.setState({isLoading:!1})})}},{key:"viewMore",value:function(){this.setState({isBigger:!1,viewMore:!0})}},{key:"refContent",value:function(e){this.content=e}},{key:"render",value:function(){if(this.props.highlighted&&!this.props.isHighlight)return null;if(this.props.notFound)return null;T["default"].locale(this.props.locales);var e=(0,T["default"])(this.props.created_at),t=(0,S["default"])("CommentContent-text",{isExpanded:this.state.viewMore}),n=this.actions,r=this.state,o=r.isLoading,i=r.showForm,s=(r.currentResponses,this.props.user),a=s.isOrganizer,l=s.role;return y("article",{className:"Comment",onMouseLeave:this.handleMouseLeave},void 0,y(A["default"],{liked:this.props.liked,onStar:this.handleStar,amount:this.props.n_stars}),y("div",{className:"Comment-wrapper"},void 0,y(N["default"],{author:this.props.author,canDelete:this.state.canDelete,onDelete:this.handleDelete,isAuthor:this.isAuthor,isOrganizer:a||"organizer"===l,date:e.fromNow(!0),isHighlight:this.props.isHighlight,isDiscussion:this.isDiscussion,onHighlightClick:this.handleHighlightClick,parentId:this.props.parent_id}),y("div",{className:"Comment-body"},void 0,g["default"].createElement("div",{id:"container",className:t,ref:this.refContent,dangerouslySetInnerHTML:{__html:this.props.content}}),this.state.isBigger?y("div",{onClick:this.viewMore,className:"Comment-viewMore"},void 0,this.props.getIntlMessage("comments.viewMore"),"..."):null,!this.props.isHighlight&&this.isDiscussion?y(B["default"],{onClick:this.handleHighlightClick,parentId:this.props.parent_id,isMobile:!0}):null,this.hasComments?y(I["default"],{comments:this.props.comments,areResponses:!0}):null,this.state.currentResponses&&!o?y(z["default"],{message:this.props.getIntlMessage("comments.getMore"),handleGetMore:this.handleGetMore}):null,o?K:null,i?y(O["default"],{objectData:this.props.objectData,parentId:this.props.id,onSend:this.handleSend,focus:!0}):null,this.props.parent_id?null:y(E["default"],{actions:n,showForm:i}))))}},{key:"hasComments",get:function(){return this.props.comments&&this.props.comments.length>0}},{key:"actions",get:function(){return[{type:"reply",props:{onClick:this.handleReply,i18n:{text:this.props.getIntlMessage("comments.reply"),disabledText:this.props.getIntlMessage("comments.replyDisabled")},disabled:this.state.showForm}}]}},{key:"isAuthor",get:function(){return this.props.user.id===this.props.author.id}},{key:"isDiscussion",get:function(){return this.props.objectData?"discussion"===this.props.objectData.objectType:!1}}]),t}(m.Component),p.propTypes={id:m.PropTypes.number.isRequired,comments:m.PropTypes.array,liked:m.PropTypes.bool,n_stars:m.PropTypes.number,dispatch:m.PropTypes.func.isRequired,objectData:m.PropTypes.object,notFound:m.PropTypes.bool,getIntlMessage:m.PropTypes.func,parent_id:m.PropTypes.number,content:m.PropTypes.string.isRequired,created_at:m.PropTypes.string.isRequired,user:m.PropTypes.object.isRequired,author:m.PropTypes.object.isRequired,locales:m.PropTypes.string.isRequired,isHighlight:m.PropTypes.bool,highlighted:m.PropTypes.bool,n_responses:m.PropTypes.number},p.defaultProps={comments:[],parent_id:null,notFound:!1,liked:!1,n_stars:0,isHighlight:!1,highlighted:!1,n_responses:0},c=d,s(c.prototype,"handleStar",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleStar"),c.prototype),s(c.prototype,"handleReply",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleReply"),c.prototype),s(c.prototype,"handleSend",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleSend"),c.prototype),s(c.prototype,"handleDelete",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleDelete"),c.prototype),s(c.prototype,"handleMouseLeave",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleMouseLeave"),c.prototype),s(c.prototype,"handleHighlightClick",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleHighlightClick"),c.prototype),s(c.prototype,"handleGetMore",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleGetMore"),c.prototype),s(c.prototype,"viewMore",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"viewMore"),c.prototype),s(c.prototype,"refContent",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"refContent"),c.prototype),u=c))||u)||u)||u);exports["default"]=Q},121:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=(0,a["default"])("CommentList",{isNested:e.areResponses});return o("section",{className:t},void 0,e.comments.map(function(t){return o(u["default"],{objectData:e.objectData,id:t},t)}))}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t(177);var i=t(1),s=(n(i),t(10)),a=n(s),l=(t(3),t(120)),u=n(l);r.propTypes={objectData:i.PropTypes.object,comments:i.PropTypes.array.isRequired,areResponses:i.PropTypes.bool},exports["default"]=r},122:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(exports,"__esModule",{value:!0});var a,l,u,c,p,d,f=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t(182);var y=t(1),m=n(y),g=t(6),b=t(9),v=t(102),w=n(v),P=t(17),T=n(P),j=t(50),S=n(j),C=t(94),M=n(C),k=t(49),O=t(86),_=f("i",{className:"icon-code"}),I=f("i",{className:"icon-link"}),D=f("i",{className:"icon-image"}),A=(a=(0,S["default"])(j.onlyLogged),l=(0,b.connect)(!1),(0,T["default"])(u=a(u=l((d=p=function(e){function t(){var e,n,i,s;r(this,t);for(var a=arguments.length,l=Array(a),u=0;a>u;u++)l[u]=arguments[u];return n=i=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={sending:!1,content:sessionStorage&&sessionStorage.getItem("editor-"+window.location.href)?sessionStorage.getItem("editor-"+window.location.href):""},s=n,o(i,s)}return i(t,e),h(t,[{key:"setRef",value:function(e){this.editor=e}},{key:"handleClick",value:function(){}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.content,r=this.props.objectData,o=r.objectId,i=r.objectType,s=this.props.parentId;this.setState({sending:!0},function(){M["default"].comments.create(n,o,i,s).then(function(e){var n=e.body,r=n.author,o=n.comment,i=(0,k.addNew)(r),s=(0,O.addNew)(o);return t.props.dispatch(i),t.props.dispatch(s),t.props.onSend(null,{author:r,comment:o}),t.props.isVideo&&(t.props.showForm(),t.props.addDiscussion()),t.editor.clearContent(),t.setState({sending:!1})})["catch"](function(e){return t.props.onSend(e),t.setState({sending:!1})})})}},{key:"handleEditorChange",value:function(e){this.setState({content:e.parsed})}},{key:"render",value:function(){return f("form",{onSubmit:this.handleSubmit},void 0,m["default"].createElement(w["default"],this.editorProps),f("button",{className:"btn-Sky",type:"submit"},void 0,this.messages.buttons.send))}},{key:"messages",get:function(){return{buttons:{send:this.state.sending?this.props.getIntlMessage("form.buttons.sending"):this.props.getIntlMessage("form.buttons.send"),cancel:this.props.getIntlMessage("form.buttons.cancel")},placeholder:this.props.getIntlMessage("form.placeholder"),helpbar:{markdown:this.props.getIntlMessage("form.helpbar.markdown"),preview:this.props.getIntlMessage("form.helpbar.preview")},bottom:{title:this.props.getIntlMessage("form.bottom.title")},editor:{uploading:this.props.getIntlMessage("form.editor.uploading")}}}},{key:"editorProps",get:function(){var e={isMain:!this.props.parentId,defaultValue:"",defaultMode:"normal",wideMode:!this.context.isVideo,features:{bold:{button:f("span",{title:this.props.getIntlMessage("form.editor.bold")+" [CMD+B]","arial-label":this.props.getIntlMessage("form.editor.bold")+" [CMD+B]",className:"icon-bold"}),updater:function(e){return"**"+e+"**"},handler:function(e){return{start:2+e.selection.start,end:e.selection.end+2}},order:1,group:1},italic:{button:f("span",{title:this.props.getIntlMessage("form.editor.italic")+" [CMD+I]","arial-label":this.props.getIntlMessage("form.editor.italic")+" [CMD+I]",className:"icon-italic"}),updater:function(e){return"_"+e+"_"},handler:function(e){return{start:1+e.selection.start,end:e.selection.end+1}},order:2,group:1},underline:{button:f("span",{title:this.props.getIntlMessage("form.editor.underline")+" [CMD+U]","aria-label":this.props.getIntlMessage("form.editor.underline")+" [CMD+U]",className:"icon-underline"}),updater:function(e){return"++"+e+"++"},handler:function(e){return{start:2+e.selection.start,end:e.selection.end+2}},order:3,group:1},code:{button:f("span",{title:this.props.getIntlMessage("form.editor.code")+" [CMD+SHIFT+K]","arial-label":this.props.getIntlMessage("form.editor.code")+" [CMD+SHIFT+K]"},void 0,_,this.props.getIntlMessage("form.editor.code")),updater:function(e){return 0===e.length?"\n\n```\n<code>\n```\n":"`"+e+"`"},handler:function(e){return 0===e.selected.length?{start:5+e.selection.start+1,end:5+e.selection.end+8}:{start:e.selection.start+1,end:e.selection.end+1}},order:4,group:2},link:{button:f("span",{title:this.props.getIntlMessage("form.editor.link")+" [CMD+K]","arial-label":this.props.getIntlMessage("form.editor.link")+" [CMD+K]"},void 0,I,this.props.getIntlMessage("form.editor.link")),updater:function(e){return"["+e+"](url)"},handler:function(e){return{start:e.selection.start+e.selected.length+3,end:e.selection.end+6}},order:5,group:2},image:{button:f("span",{title:this.props.getIntlMessage("form.editor.image")+" [CMD+SHIFT+I]","arial-label":this.props.getIntlMessage("form.editor.image")+" [CMD+SHIFT+I]"},void 0,D,this.props.getIntlMessage("form.editor.image")),updater:function(e){return"![]("+(e||"url")+")"},handler:function(e){return 0===e.selected.length?{start:e.selection.start+4,end:e.selection.end+3+4}:{start:e.selection.start+4+e.selected.length+1,end:e.selection.end+5}},order:6,group:2},list:{button:f("span",{title:this.props.getIntlMessage("form.editor.unorderedList")+" [CMD+L]","arial-label":this.props.getIntlMessage("form.editor.unorderedList")+" [CMD+L]",className:"icon-list"}),updater:function(e,t,n){return 0===n.start?"- "+e:"\n- "+e},handler:function(e){return 0===e.selection.start?{start:e.selection.start+2+e.selected.length,end:e.selection.end+2}:{start:e.selection.start+3+e.selected.length,end:e.selection.end+3}},order:7,group:3},listOrdered:{button:f("span",{title:this.props.getIntlMessage("form.editor.orderedList"),"arial-label":this.props.getIntlMessage("form.editor.orderedList"),className:"icon-list-ol"}),updater:function(e,t,n){return 0===n.start?"1. "+e:"\n1. "+e},handler:function(e){return 0===e.selection.start?{start:e.selection.start+3+e.selected.length,end:e.selection.end+3}:{start:e.selection.start+4+e.selected.length,end:e.selection.end+4}},order:8,group:3}},buttons:{field:f("span",{title:this.props.getIntlMessage("form.editor.edit"),"arial-label":this.props.getIntlMessage("form.editor.edit"),className:"icon-pencil"}),preview:f("span",{title:this.props.getIntlMessage("form.editor.preview"),"arial-label":this.props.getIntlMessage("form.editor.preview"),className:"icon-doc_A"}),expand:f("span",{title:this.props.getIntlMessage("form.editor.expand")+" [CMD+E]","aria-label":this.props.getIntlMessage("form.editor.expand")+" [CMD+E]",className:"icon-expand_A"}),contract:f("span",{title:this.props.getIntlMessage("form.editor.contract")+" [ESC]","aria-label":this.props.getIntlMessage("form.editor.contract")+" [ESC]",className:"icon-compress"})},textarea:{placeholder:this.props.getIntlMessage("form.placeholder")},markdown:{highlight:function(e,t){return t&&window.hljs.getLanguage(t)?window.hljs.highlight(t,e).value:window.hljs.highlightAuto(e).value}},preview:{className:"CommentContent-text"},onSubmit:this.handleSubmit,onChange:this.handleEditorChange,ref:this.setRef,messages:this.messages};return"organizer"===this.props.user.role&&(e.features.quote={button:f("span",{title:this.props.getIntlMessage("form.editor.quote")+" [CTRL+Q]","arial-label":this.props.getIntlMessage("form.editor.quote")+" [CTRL+Q]",className:"icon-quote"}),updater:function(e,t,n){return t.length===n.start?"\n> ":"> "+e+"\n"},handler:function(e){return e.selected.length===e.selection.start?{start:e.selection.start+2,end:e.selection.end+2}:{start:2+e.selection.start,end:e.selection.end+2}},order:9,group:3},e.features.heading={button:f("span",{title:this.props.getIntlMessage("form.editor.heading"),"arial-label":this.props.getIntlMessage("form.editor.heading"),className:"fa fa-header"},void 0,"H"),updater:function(e){return"#"!==e.charAt(0)?"## "+e:"#"===e.charAt(5)?e:"#"+e},handler:function(e){return"#"!==e.selected.charAt(0)?{start:e.selection.start,end:e.selection.end+3}:"#"===e.selected.charAt(5)?e.selection:{start:e.selection.start,end:e.selection.end+1}},order:10,group:3},e.features.youtube={button:f("span",{title:this.props.getIntlMessage("form.editor.youtube"),"arial-label":this.props.getIntlMessage("form.editor.youtube"),className:"icon-youtube-play"}),updater:function(e){return e.length>0?"@[youtube]("+e+")":"@[youtube](id|url)"},handler:function(e){return e.selected.length>0?{start:e.selection.start+11,end:e.selection.end+11}:{start:e.selection.start+11,end:e.selection.end+17}},order:11,group:3}),e}}]),t}(y.Component),p.propTypes={objectData:y.PropTypes.shape({objectId:y.PropTypes.number.isRequired,objectType:y.PropTypes.string.isRequired}),parentId:y.PropTypes.number,getIntlMessage:y.PropTypes.func.isRequired,dispatch:y.PropTypes.func.isRequired,onSend:y.PropTypes.func,hideButtonAction:y.PropTypes.func,hasPermissions:y.PropTypes.bool,focus:y.PropTypes.bool,messages:y.PropTypes.object,user:y.PropTypes.object,isVideo:y.PropTypes.bool},p.defaultProps={parentId:null,onSend:function(){},
hideButtonAction:function(){},hasPermissions:!1,isVideo:!1},p.contextTypes={isVideo:y.PropTypes.bool},c=d,s(c.prototype,"setRef",[g.autobind],Object.getOwnPropertyDescriptor(c.prototype,"setRef"),c.prototype),s(c.prototype,"handleClick",[g.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleClick"),c.prototype),s(c.prototype,"handleSubmit",[g.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleSubmit"),c.prototype),s(c.prototype,"handleEditorChange",[g.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleEditorChange"),c.prototype),u=c))||u)||u)||u);exports["default"]=A},135:113,154:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e.disabled?u["default"].createElement("div",a({className:"CommentActions-reply"},e),e.i18n.disabledText):u["default"].createElement("div",a({className:"CommentActions-reply"},e),e.i18n.text)}function o(e){return u["default"].createElement("button",a({className:"CommentActions-bestAnswer"},e),e.i18n.text)}function i(e){var t=(0,p["default"])("CommentActions",{disabled:e.showForm});return s("div",{className:t},void 0,e.actions.map(function(e){var t=e.type,n=e.props,r=void 0===n?{}:n,o=d[t];return o?u["default"].createElement(o,a({key:t},r)):null}))}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t(174);var l=t(1),u=n(l),c=t(12),p=n(c);r.propTypes={i18n:l.PropTypes.object,disabled:l.PropTypes.bool},o.propTypes={i18n:l.PropTypes.object};var d={reply:r,bestAnswer:o};i.propTypes={actions:l.PropTypes.array,showForm:l.PropTypes.bool},i.defaultProps={actions:[]},exports["default"]=i},155:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return o("div",{className:"CommentAuthor"},void 0,o("figure",{className:"CommentAuthor-avatar"},void 0,o("img",{alt:e.username,src:e.avatar,height:"30",width:"30"})),o("a",{href:"/@"+e.username,target:"_blank",className:"CommentAuthor-name"},void 0,e.username))}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t(175);var i=t(1);n(i);exports["default"]=r},156:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.handleGetMore,n=e.message;return o("div",{className:"Comment-getMore"},void 0,o("p",{onClick:t},void 0,s,n))}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),i=t(1),s=(n(i),o("span",{className:"icon-platzi"}));r.propTypes={handleGetMore:i.PropTypes.func,message:i.PropTypes.string.isRequired},exports["default"]=r},157:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(!e.isAuthor&&!e.isOrganizer)return null;var t=(0,u["default"])("CommentDelete",{"is-active":e.canDelete});return o("button",{onClick:e.onDelete,className:t},void 0,d,o(a["default"],{transitionName:"delete",transitionEnterTimeout:300,transitionLeaveTimeout:300,component:"span"},void 0,e.canDelete?o("span",{className:"message"},void 0,e.getIntlMessage("comments.delete")):null))}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t(176),t(170);var i=t(1),s=(n(i),t(18)),a=n(s),l=t(12),u=n(l),c=t(17),p=n(c),d=o("span",{className:"icon-trash"});r.propTypes={isAuthor:i.PropTypes.bool,isOrganizer:i.PropTypes.bool,canDelete:i.PropTypes.bool,onDelete:i.PropTypes.func,getIntlMessage:i.PropTypes.func.isRequired},r.defaultProps={isAuthor:!1,isOrganizer:!1,canDelete:!1},exports["default"]=(0,p["default"])(r)},158:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return o("div",{className:"CommentMeta"},void 0,o("div",{className:"CommentAuthor-container"},void 0,s["default"].createElement(c["default"],e.author),o("div",{className:"CommentAuthor-rank"},void 0,e.author.score," ",e.getIntlMessage("comments.points"))),o("div",{className:"CommentMeta-container"},void 0,o("div",{className:"CommentMeta-date"},void 0,y,o("span",{},void 0,e.date)),o(d["default"],{canDelete:e.canDelete,onDelete:e.onDelete,isAuthor:e.isAuthor,isOrganizer:e.isOrganizer})),!e.isHighlight&&e.isDiscussion?o(h["default"],{onClick:e.onHighlightClick,parentId:e.parentId}):null)}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t(178);var i=t(1),s=n(i),a=t(17),l=n(a),u=t(155),c=n(u),p=t(157),d=n(p),f=t(119),h=n(f),y=o("span",{className:"icon-clock_A"});r.propTypes={author:i.PropTypes.object,canDelete:i.PropTypes.bool,onDelete:i.PropTypes.func,onDeleteMouseLeave:i.PropTypes.func,isAuthor:i.PropTypes.bool,isOrganizer:i.PropTypes.bool,date:i.PropTypes.string,isHighlight:i.PropTypes.bool,isDiscussion:i.PropTypes.bool,onHighlightClick:i.PropTypes.func,parentId:i.PropTypes.number,getIntlMessage:i.PropTypes.func},exports["default"]=(0,l["default"])(r)},159:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=(0,a["default"])("CommentStar-icon icon-thumbs-up",{"is-active":e.isActive||e.liked});return o("div",{className:"CommentStar",onClick:e.onStar},void 0,o("span",{className:t}),o("span",{className:"CommentStar-amount"},void 0,e.amount))}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t(179);var i=t(1),s=(n(i),t(12)),a=n(s);r.propTypes={isActive:i.PropTypes.bool,liked:i.PropTypes.bool,onStar:i.PropTypes.func.isRequired,amount:i.PropTypes.number},r.defaultProps={isActive:!1,liked:!1,amount:0},exports["default"]=r},160:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return{id:e.get("comments").get("highlighted")}}function o(e){return e.id?i("div",{className:"Highlighted",id:"best-answer"},void 0,i("div",{className:"Highlighted-tag"},void 0,y," ",e.getIntlMessage("bestAnswer")),i(c["default"],{transitionName:"highlighted",transitionEnterTimeout:500,transitionLeaveTimeout:300,component:"div",className:"Highlighted-content"},void 0,i(h["default"],{id:e.id,objectData:e.objectData,isHighlight:!0},e.id))):null}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t(180),t(171);var s=t(1),a=(n(s),t(22)),l=t(9),u=t(18),c=n(u),p=t(17),d=n(p),f=t(120),h=n(f),y=i("span",{className:"icon-check"});o.propTypes={getIntlMessage:s.PropTypes.func,id:s.PropTypes.number,objectData:s.PropTypes.shape({objectId:s.PropTypes.number,objectType:s.PropTypes.string}).isRequired};var m=(0,a.compose)((0,l.connect)(r),d["default"]);exports["default"]=m(o)},161:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function a(e){return{comments:e.get("comments").get("list").toJS(),pagination:e.get("comments").get("pagination").toJS(),filter:e.get("comments").get("filter")}}Object.defineProperty(exports,"__esModule",{value:!0});var l,u,c,p,d,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t(181);var m=t(1),g=n(m),b=t(9),v=t(6),w=t(3),P=t(7),T=n(P),j=t(8),S=n(j),C=t(11),M=n(C),k=t(17),O=n(k),_=t(10),I=n(_),D=t(122),A=n(D),R=t(121),N=n(R),x=t(160),E=n(x),J=t(78),z=n(J),F=t(94),B=n(F),L=t(49),H=t(86);(0,S["default"])(T["default"]);var Z=h(z["default"],{className:"CommentApp-loader"}),G=h(z["default"],{className:"CommentApp-loader"}),W=(l=(0,b.connect)(a),(0,O["default"])(u=l((d=p=function(e){function t(){var e,n,i,s;r(this,t);for(var a=arguments.length,l=Array(a),u=0;a>u;u++)l[u]=arguments[u];return n=i=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={isLoadingComments:!1,isClicked:!1,currentFilter:"-created",isLoadingFilter:!1},s=n,o(i,s)}return i(t,e),y(t,[{key:"getChildContext",value:function(){return{isVideo:this.props.isVideo}}},{key:"updateLasLogin",value:function(){return T["default"].post("/account/update-last-login/").set("X-CSRFToken",(0,M["default"])(document.cookie).csrftoken).set("X-Requested-With","XMLHttpRequest").send()}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll),this.updateLasLogin().then(function(e){})["catch"](function(e){})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=this;this.state.isLoadingComments||!function(){var t=window.innerWidth,n=document.body.clientHeight,r=window.scrollY,o=t+r,i=e.props,s=i.objectData,a=s.objectId,l=s.objectType,u=i.pagination,c=u.current,p=u.total,d=o+e.props.scrollBuffer>=n,f=p>c;d&&f&&e.setState({isLoadingComments:!0},function(){B["default"].comments.retrieve(a,l,c+1,e.props.filter).then(function(e){return e.body}).then(function(t){var n=t.authors,r=t.comments,o=t.first_comments,i=t.stars.comments,s=(0,L.addAuthorList)(n);if(e.props.dispatch(s),e.props.dispatch((0,H.addList)({comments:r,list:o,parentId:null})),i&&i.length>0){var a=(0,H.like)(i);e.props.dispatch(a)}e.props.dispatch((0,H.nextPage)()),e.setState({isLoadingComments:!1})})["catch"](function(t){e.setState({isLoadingComments:!1})})})}()}},{key:"showForm",value:function(){this.setState({isClicked:!this.state.isClicked})}},{key:"changeFilter",value:function(e,t){var n=this;if(e.preventDefault(),t===this.props.filter)return null;var r=this.props,o=r.objectData,i=o.objectId,s=o.objectType,a=r.pagination,l=(a.current,a.total,t),u=this.props.filter;this.props.dispatch((0,H.changeFilter)({filter:l})),this.setState({isLoadingFilter:!0}),B["default"].comments.retrieve(i,s,1,l).then(function(e){return e.body}).then(function(e){var t=e.authors,r=e.comments,o=e.first_comments,i=e.stars.comments;n.setState({isLoadingFilter:!1});var s=(0,L.addAuthorList)(t);if(n.props.dispatch(s),n.props.dispatch((0,H.changeList)({list:(0,w.List)(o)})),n.props.dispatch((0,H.addList)({list:[],comments:r,parentId:null})),n.props.dispatch((0,H.resetPage)()),i&&i.length>0){var a=(0,H.like)(i);n.props.dispatch(a)}})["catch"](function(e){n.setState({isLoadingFilter:!1}),n.props.dispatch((0,H.changeFilter)({filter:u}))})}},{key:"render",value:function(){var e=this,t=(0,I["default"])("Chat-filter",{"is-active":"-stars_count"===this.props.filter}),n=(0,I["default"])("Chat-filter",{"is-active":"-created"===this.props.filter});return h("section",{className:"CommentApp"},void 0,h(E["default"],{objectData:this.props.objectData}),this.state.isClicked||!this.props.isVideo?g["default"].createElement(A["default"],f({},this.props,{showForm:this.showForm,focus:!0,isVideo:this.props.isVideo,addDiscussion:this.props.addDiscussion})):h("div",{onClick:this.showForm,className:"InitialComment"},void 0,h("figure",{},void 0,h("img",{src:this.props.userAvatar,width:"30",height:"30"})),h("div",{},void 0,this.props.commentLabel)),h("div",{className:"Filters"},void 0,h("div",{className:t,onClick:function(t){return e.changeFilter(t,"-stars_count")}},void 0,this.props.getIntlMessage("comments.top")),h("div",{className:n,onClick:function(t){return e.changeFilter(t,"-created")}},void 0,this.props.getIntlMessage("comments.new"))),this.state.isLoadingFilter?Z:null,this.hasComments&&!this.state.isLoadingFilter?h(N["default"],{objectData:this.props.objectData,comments:this.props.comments}):null,this.state.isLoadingComments?G:null)}},{key:"hasComments",get:function(){return 0!==this.props.comments.length}}]),t}(m.Component),p.propTypes={objectData:m.PropTypes.shape({objectId:m.PropTypes.number.isRequired,objectType:m.PropTypes.string.isRequired}).isRequired,comments:m.PropTypes.array,scrollBuffer:m.PropTypes.number,pagination:m.PropTypes.shape({current:m.PropTypes.number,total:m.PropTypes.number}),dispatch:m.PropTypes.func.isRequired,isVideo:m.PropTypes.bool,filter:m.PropTypes.string,getIntlMessage:m.PropTypes.func},p.defaultProps={comments:[],scrollBuffer:0,pagination:{current:1,total:1},isVideo:!1},p.childContextTypes={isVideo:m.PropTypes.bool.isRequired},c=d,s(c.prototype,"updateLasLogin",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"updateLasLogin"),c.prototype),s(c.prototype,"handleScroll",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"handleScroll"),c.prototype),s(c.prototype,"showForm",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"showForm"),c.prototype),s(c.prototype,"changeFilter",[v.autobind],Object.getOwnPropertyDescriptor(c.prototype,"changeFilter"),c.prototype),u=c))||u)||u);exports["default"]=W},162:function(e,exports,t){"use strict";function n(){var e=[].slice.call(document.querySelectorAll("pre"));e.forEach(function(e){window.hljs&&window.hljs.highlightBlock(e)})}Object.defineProperty(exports,"__esModule",{value:!0}),t.e(1,function(){window.hljs=t(93),window.hljs.initHighlightingOnLoad()}),exports["default"]=n},170:113,171:113,172:113,173:113,174:113,175:113,176:113,177:113,178:113,179:113,180:113,181:113,182:113,187:function(e,exports){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,o,i){r=r||"&",o=o||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(r);var l=1e3;i&&"number"==typeof i.maxKeys&&(l=i.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;u>c;++c){var p,d,f,h,y=e[c].replace(a,"%20"),m=y.indexOf(o);m>=0?(p=y.substr(0,m),d=y.substr(m+1)):(p=y,d=""),f=decodeURIComponent(p),h=decodeURIComponent(d),t(s,f)?n(s[f])?s[f].push(h):s[f]=[s[f],h]:s[f]=h}return s};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},188:function(e,exports){"use strict";function t(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,i,s,a){return i=i||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?t(o(e),function(o){var a=encodeURIComponent(n(o))+s;return r(e[o])?t(e[o],function(e){return a+encodeURIComponent(n(e))}).join(i):a+encodeURIComponent(n(e[o]))}).join(i):a?encodeURIComponent(n(a))+s+encodeURIComponent(n(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},189:function(e,exports,t){"use strict";exports.decode=exports.parse=t(187),exports.encode=exports.stringify=t(188)},287:function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i,s,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t(1),u=(s=i=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),a(t,[{key:"getChildContext",value:function(){return{features:this.props.features}}},{key:"render",value:function(){return l.Children.only(this.props.children)}}]),t}(l.Component),i.propTypes={features:l.PropTypes.objectOf(l.PropTypes.bool).isRequired,children:l.PropTypes.node.isRequired},i.childContextTypes={features:l.PropTypes.objectOf(l.PropTypes.bool).isRequired},s);exports["default"]=u},288:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length<=0||void 0===arguments[0]?"all":arguments[0];return function(t){function n(n,r){return"all"===e?s["default"].createElement(t,o({},n,r)):r.features[e]?s["default"].createElement(t,n):null}return n.displayName="Feature("+e+")",n.contextTypes={features:i.PropTypes.objectOf(i.PropTypes.bool).isRequired},n}}Object.defineProperty(exports,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t(1),s=n(i);exports["default"]=r},522:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){window.hljs=t(93),window.hljs.initHighlightingOnLoad();var e=(0,g["default"])("discussions")(t(161)["default"]);return window.Intl&&w?(0,l.render)(i(y["default"],{features:P.features},void 0,i(f["default"],{user:P.user},void 0,i(c.Provider,{store:j},void 0,a["default"].createElement(e,o({},P,{scrollBuffer:300}))))),w):null}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var a in i)void 0===n[a]&&(n[a]=i[a]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t(952);var s=t(1),a=n(s),l=t(13),u=t(22),c=t(9),p=t(3),d=t(90),f=n(d),h=t(287),y=n(h),m=t(288),g=n(m),b=t(523),v=n(b),w=document.getElementById("comments-container"),P=window.client_data.initialProps,T=window.client_data.initialState,j=(0,u.createStore)(v["default"],(0,p.fromJS)(T));window.Intl?r(!1):t.e(0,function(){t(77),r(!0)})},523:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=t(85),o=t(49),i=n(o),s=t(86),a=n(s),l=(0,r.combineReducers)({authors:i["default"],comments:a["default"]});exports["default"]=l},952:113}));